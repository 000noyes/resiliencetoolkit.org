---
import BaseLayout from '@/layouts/BaseLayout.astro';
import ActionButton from '@/components/ActionButton.astro';
import FAQItem from '@/components/FAQItem.astro';
---

<BaseLayout title="About - Resilience Hub" description="Origin story, collaborators, services, FAQ, and contact">
  <div class="container mx-auto px-4 py-12 max-w-3xl">
    <div class="flex justify-center mb-4">
      <img src="/RHT_orange.svg" alt="Resilience Hub Toolkit logo" class="w-64 h-64" />
    </div>
    <h1 class="text-4xl font-bold text-foreground mb-6">About the Toolkit</h1>

    <div class="prose prose-lg max-w-none text-foreground">
      <p class="text-lg text-muted-foreground mb-8">
        This toolkit was compiled in the aftermath of Vermont flooding in 2023 and 2024 for communities, mutual aid groups, local organizations, and municipalities to use in assessing and building resilience to disaster and disruption.
      </p>

      <section class="mb-8">
        <h2 class="text-2xl font-semibold mb-4">Origin Story</h2>
        <p class="text-muted-foreground">
          We are community members, organizers, and caretakers. We made this toolkit because we needed it when the waters rose. We hope you choose to use this toolkit as a starting place to develop a Resilience Hub that supports your community in the day-to-day and when acute disaster strikes. You may also find this toolkit useful if youâ€™re located somewhere else with a lot of rain, mountains, and people living in floodplains. 
        </p>
      </section>

      <section class="mb-8">
        <h2 class="text-2xl font-semibold mb-4">Collaborators</h2>
        <p class="text-muted-foreground mb-4">
          This toolkit is the result of countless people caring enough to show up, again and again, for their communities, then write down what they learned. It is a testament to the expertise that comes from lived experience, and the result of countless minds and hearts collaborating to identify a gap and help fill it. 
        </p>  
<!--           
        <p class="text-muted-foreground mb-4">
          This toolkit was compiled by frontline, grassroots flood responders across Vermont in the wake of flooding in 2023 and 2024, and we humbly present the first edition of this toolkit in fall of 2025. This toolkit will continue to change as communities do. 
        </p> -->
          
        <p class="text-muted-foreground mb-4">
          The people who crafted this tool are community members, organizers, and careworkers; specialists and generalists; writers and builders. So many people and organizations participated in and supported the making of this work, this collection of expertise and vision. Here are some, but not all, of them:
        </p>
        <div class="bg-muted p-6 rounded-lg">
          <ul class="list-disc list-inside space-y-2 text-muted-foreground">
            <li>Access Ecologies</li>
            <li>Community Resilience Organizations (CROs)</li>
            <li>Community Resilience for the Waterbury Area (CReW)</li>
            <li>Cooperation Vermont</li>
            <li>Lamoille Area Recovery Network (LeARN)</li>
            <li>Land Access and Opportunity Board (LAOB)</li>
            <li>Kingdom United Resilience and Recovery Effort (KURRVE)</li>
            <li>Northeast Kingdom Organizing (NEKO)</li>
            <li>Rose Core Collective</li>
            <li>Rural Vermont</li>
          </ul>
        </div>
      </section>

      <!-- <section class="mb-8">
        <h2 class="text-2xl font-semibold mb-4">How to Contribute</h2>
        <p class="text-muted-foreground mb-4">
          This is an open source project released under the MIT License and Creative Commons.
          We welcome contributions of all kinds:
        </p>
        <ul class="list-disc list-inside space-y-2 text-muted-foreground">
          <li>Share your experience using the toolkit</li>
          <li>Contribute new modules or templates</li>
          <li>Report bugs or suggest features</li>
          <li>Translate content into other languages</li>
          <li>Help with code development</li>
        </ul>
      </section> -->

      <section class="mb-8">
        <h2 class="text-2xl font-semibold mb-4">License</h2>
        <p class="text-muted-foreground">
          Code is licensed under the <a href="/LICENSE" class="text-primary hover:underline">MIT License</a>.
          Content is released under Creative Commons licensing to ensure it remains freely
          available to communities everywhere.
        </p>
      </section>
    </div>

    <!-- Support & Services Section -->
    <div class="space-y-12 mt-12">
      <h2 class="text-3xl font-bold text-foreground">Support & Services</h2>
      <p class="text-lg text-muted-foreground mb-12">
        We offer training, technical support, and services to help communities
        implement and customize the Resilience Hub Toolkit.
      </p>

      <!-- Services -->
      <section id="services">
        <h3 class="text-2xl font-semibold text-foreground mb-6">Services</h3>
        <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
          <div class="bg-card border border-border rounded-lg p-6">
            <h4 class="text-lg font-semibold text-foreground mb-2">Fiscal Sponsorship</h4>
            <p class="text-sm text-muted-foreground">
              Support for community organizations seeking funding for resilience initiatives.
            </p>
          </div>

          <div class="bg-card border border-border rounded-lg p-6">
            <h4 class="text-lg font-semibold text-foreground mb-2">Training & Facilitation</h4>
            <p class="text-sm text-muted-foreground">
              Workshops and training sessions for community organizers and volunteers.
            </p>
          </div>

          <div class="bg-card border border-border rounded-lg p-6">
            <h4 class="text-lg font-semibold text-foreground mb-2">Technical Setup</h4>
            <p class="text-sm text-muted-foreground">
              Help getting your resilience hub up and running with custom configurations.
            </p>
          </div>

          <div class="bg-card border border-border rounded-lg p-6">
            <h4 class="text-lg font-semibold text-foreground mb-2">Local Hosting</h4>
            <p class="text-sm text-muted-foreground">
              Options for hosting your own instance of the toolkit with full data control.
            </p>
          </div>
        </div>
      </section>

      <!-- Get Help -->
      <section>
        <h3 class="text-2xl font-semibold text-foreground mb-6">Get Help</h3>
        <div class="bg-muted p-6 rounded-lg">
          <p class="text-muted-foreground mb-4">
            Need assistance? Have questions? We're here to help.
          </p>
          <ul class="list-disc list-inside space-y-2 text-sm text-muted-foreground mb-6">
            <li>Check our <a href="#faq" class="text-primary hover:underline">frequently asked questions</a> below</li>
            <li>Join our community forum (coming soon)</li>
            <li>Report issues on GitHub</li>
            <li><a href="#contact" class="text-primary hover:underline">Contact Us</a> directly</li>
          </ul>
        </div>
      </section>

      <!-- FAQ -->
      <section id="faq">
        <h3 class="text-2xl font-semibold text-foreground mb-6">Frequently Asked Questions</h3>
        <div class="space-y-4">
          <FAQItem
            question="What is a Resilience Hub?"
            answer="A resilience hub can look many ways, but at its core, it is a centralized source of information, support, and supplies that supports community resilience. Read more about Resilience Hubs on the <a href='/introduction' class='text-primary hover:underline'>Introduction</a> page."
          />

          <FAQItem
            question="Who is this toolkit for?"
            answer="This toolkit is for community organizers, neighborhood groups, mutual aid networks, faith-based organizations, and anyone working to strengthen community resilience. No special training or technical skills are required."
          />

          <FAQItem
            question="Is this toolkit free to use?"
            answer="Yes, this toolkit is completely free and open-source. You can use it, modify it, and share it with others."
          />

          <FAQItem
            question="Do I need internet to use this toolkit?"
            answer="Not after today, as long as you don't clear your browser history for this site. This toolkit automatically downloads all pages to your device on first visit, so it works completely offline after that. Your form entries and checkmarks are saved automatically and syncs in the background when you're back online. You can also download PDFs or print pages if you prefer paper copies. Learn more on the <a href='/downloads' class='text-primary hover:underline'>Downloads</a> page."
          />

          <FAQItem
            question="Is my information private and secure?"
            answer="Yes. All information you enter stays on your device in your browser's local storage (IndexedDB). Nothing is sent to servers or stored in the cloud. The toolkit works fully offline once loaded."
          />

          <FAQItem
            question="Can I use this on my phone or tablet?"
            answer="Yes. The toolkit is designed to work on any device - phones, tablets, and computers. All features, including filling out forms, printing, and exporting data, work on mobile devices."
          />

          <FAQItem
            question="How do I save my work and transfer it to another device?"
            answer="On any module page, click the 'Export local data' button to download your information as a file. You can then email it to yourself, save it to a USB drive, or store it in cloud storage to transfer to another device. On the new device, use the 'Import data' button to load your information (Coming Soon)."
          />

          <FAQItem
            question="How can I report a problem or suggest an improvement?"
            answer="You can report issues or suggest features on our <a href='https://github.com/yourusername/resiliencetoolkit' class='text-primary hover:underline' target='_blank' rel='noopener noreferrer'>GitHub repository</a> or <a href='#contact' class='text-primary hover:underline'>contact us directly</a> using the form below."
          />
        </div>
      </section>

      <!-- Contact -->
      <section id="contact">
        <h3 class="text-2xl font-semibold text-foreground mb-6">Contact</h3>
        <div class="bg-card border border-border rounded-lg p-8">
          <p class="text-muted-foreground mb-6">
            Interested in collaborating or have questions about the toolkit?
            Reach out to discuss how we can support each other.
          </p>
          <form id="contact-form" class="space-y-4">
            <div id="form-fields">
              <div class="mb-4">
                <label for="contact-email" class="block text-sm font-medium text-foreground mb-2">Email</label>
                <input
                  type="email"
                  id="contact-email"
                  name="email"
                  placeholder="your@email.com"
                  class="w-full px-4 py-2 border border-border rounded-md bg-background text-foreground"
                  required
                />
              </div>
              <div class="mb-4">
                <label for="contact-message" class="block text-sm font-medium text-foreground mb-2">Message</label>
                <textarea
                  id="contact-message"
                  name="message"
                  rows="4"
                  placeholder="How can we help?"
                  class="w-full px-4 py-2 border border-border rounded-md bg-background text-foreground"
                  required
                ></textarea>
              </div>
              <button
                type="submit"
                class="inline-flex items-center justify-center font-medium transition-all duration-default ease-default focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 active:translate-y-px rounded-lg bg-primary text-primary-foreground shadow-sm hover:shadow-raised hover:bg-primary/90 px-6 py-2.5 text-body"
              >
                Send Message
              </button>
            </div>
            <div id="success-message" class="hidden text-center py-8">
              <div class="inline-flex items-center justify-center w-12 h-12 mb-4 relative">
                <svg class="w-12 h-12 absolute" viewBox="0 0 48 48">
                  <circle
                    cx="24"
                    cy="24"
                    r="20"
                    fill="none"
                    stroke="currentColor"
                    stroke-width="3"
                    class="text-primary/10"
                  />
                </svg>
                <svg
                  id="progress-ring"
                  class="w-12 h-12 absolute -rotate-90"
                  viewBox="0 0 48 48"
                >
                  <circle
                    cx="24"
                    cy="24"
                    r="20"
                    fill="none"
                    stroke="currentColor"
                    stroke-width="3"
                    stroke-linecap="round"
                    class="text-primary"
                    stroke-dasharray="125.6"
                    stroke-dashoffset="125.6"
                  />
                </svg>
              </div>
              <p class="text-body font-medium text-foreground">
                Opening your email client...
              </p>
              <p class="text-sm text-muted-foreground mt-2">
                or email us directly at <a href="mailto:info@gocros.com">info@gocros.com</a>.
              </p>
            </div>
          </form>
        </div>
      </section>
    </div>
  </div>
</BaseLayout>

<style>
  @keyframes progressFill {
    from {
      stroke-dashoffset: 125.6;
    }
    to {
      stroke-dashoffset: 0;
    }
  }

  #progress-ring circle {
    animation: none;
  }

  #progress-ring.animating circle {
    animation: progressFill 5s linear forwards;
  }
</style>

<script>
  document.addEventListener('DOMContentLoaded', () => {
    const form = document.getElementById('contact-form') as HTMLFormElement;
    const formFields = document.getElementById('form-fields');
    const successMessage = document.getElementById('success-message');
    const progressRing = document.getElementById('progress-ring');

    if (form) {
      form.addEventListener('submit', (e: Event) => {
        e.preventDefault();

        const emailInput = document.getElementById('contact-email') as HTMLInputElement;
        const messageInput = document.getElementById('contact-message') as HTMLTextAreaElement;

        const userEmail = emailInput?.value.trim();
        const message = messageInput?.value.trim();

        if (!userEmail || !message) {
          return;
        }

        // Create mailto link with subject and body
        const subject = encodeURIComponent('Resilience Toolkit Contact');
        const body = encodeURIComponent(`Message: ${message}\n\nFrom: ${userEmail}`);
        const mailtoLink = `mailto:info@gocros.com?subject=${subject}&body=${body}`;

        // Show success message and hide form fields
        if (formFields && successMessage && progressRing) {
          formFields.classList.add('hidden');
          successMessage.classList.remove('hidden');
          progressRing.classList.add('animating');
        }

        // Open email client after 5 seconds
        setTimeout(() => {
          window.location.href = mailtoLink;
        }, 5000);

        // Reset form after 7 seconds
        setTimeout(() => {
          form.reset();
          if (formFields && successMessage && progressRing) {
            formFields.classList.remove('hidden');
            successMessage.classList.add('hidden');
            progressRing.classList.remove('animating');
          }
        }, 7000);
      });
    }
  });
</script>
