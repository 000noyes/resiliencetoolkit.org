---
import BaseLayout from '@/layouts/BaseLayout.astro';
import ActionButton from '@/components/ActionButton.astro';
import FAQItem from '@/components/FAQItem.astro';
import Card from '@/components/Card.astro';
---

<BaseLayout
  title="About | Community Resilience Hub Toolkit"
  description="The story of how Vermont flood survivors created this toolkit, and the community of organizers, neighbors, and responders who built it together."
>
  <!-- Introduction Section -->
  <section class="py-12">
    <div class="container mx-auto px-4 max-w-3xl">
      <h1 class="text-hero font-semibold mb-8 text-foreground">
        About
      </h1>
      <div class="space-y-4">
        <p class="text-body-large text-muted-foreground leading-relaxed">
          This toolkit exists because people showed up. When Vermont flooded in 2023 and 2024, neighbors organized supplies, checked on one another, and mapped what their communities needed. Much of this work happened without instruction or official guidance. People figured it out together.
        </p>
        <p class="text-body text-muted-foreground">
          This page is about the people who did that work, how this toolkit grew from what they learned, and how you can take it forward.
        </p>
      </div>
    </div>
  </section>

  <!-- Origins Section -->
  <section class="py-16 bg-muted">
    <div class="container mx-auto px-4 max-w-3xl">
      <h2 class="text-headline font-semibold mb-6 text-foreground">
        Why This Toolkit Exists
      </h2>
      <div class="space-y-4">
        <p class="text-body text-muted-foreground">
          After the floods, many communities found themselves coordinating large efforts with no shared framework. Volunteers stepped in as first responders because someone had to. Living rooms became supply centers. Phone trees replaced broken communication channels. People wrote down what worked wherever they could — on clipboards, in text threads, on whiteboards in church basements.
        </p>
        <p class="text-body text-muted-foreground">
          As the waters receded, one question kept surfacing:
        </p>
        <blockquote class="border-l-4 border-primary pl-4 italic text-body-large text-foreground">
          <em>What if communities didn’t have to start from nothing next time?</em>
        </blockquote>
        <p class="text-body text-muted-foreground">
          This toolkit is one answer to that question.
        </p>
      </div>
    </div>
  </section>

  <!-- Creation Section -->
  <section class="py-16">
    <div class="container mx-auto px-4 max-w-3xl">
      <h2 class="text-headline font-semibold mb-6 text-foreground">
        How This Toolkit Was Built
      </h2>
      <div class="space-y-4">
        <p class="text-body text-muted-foreground">
          The toolkit was created by people who were there. Frontline organizers, mutual aid groups, and community members across Vermont gathered what they had learned and compared notes. They documented what actually helped when crisis hit, not what a handbook said should happen.
        </p>
        <p class="text-body text-muted-foreground">
          The process involved countless conversations, shared spreadsheets, and lessons learned
          the hard way. Community organizers, mutual aid networks, and grassroots groups across
          Vermont contributed their experience. The expertise here comes from doing, from showing
          up day after day, from figuring out how to coordinate hundreds of volunteers with limited
          resources.
        </p>
        <p class="text-body text-muted-foreground">
          This is a first edition. Like the communities it serves, it will continue to grow and change.
        </p>
      </div>
    </div>
  </section>

  <!-- Acknowledgements Section - CENTERPIECE -->
  <section class="py-20 bg-gradient-to-b from-primary/5 to-background border-t border-b border-primary/10">
    <div class="container mx-auto px-4 max-w-4xl">
      <h2 class="text-hero font-semibold mb-8 text-center text-foreground">
        Acknowledgements
      </h2>
      <div class="text-center mb-12">
        <p class="text-body-large leading-relaxed text-muted-foreground mb-6">
          This toolkit is the result of countless people caring enough to show up, again and again,
          for their communities, then writing down what they learned. It is a testament to the expertise
          that comes from lived experience, and the result of countless minds and hearts collaborating
          to identify a gap and help fill it.
        </p>
        <p class="text-body-large leading-relaxed text-muted-foreground mb-6">
          This toolkit was compiled by frontline, grassroots flood responders across Vermont in the wake
          of flooding in 2023 and 2024, and we humbly present the first edition of this toolkit in the
          Fall of 2025. This toolkit will continue to change as communities do.
        </p>
        <p class="text-body-large leading-relaxed text-muted-foreground">
          The people who crafted this tool are community members, organizers, and careworkers; specialists
          and generalists; writers and builders. So many people and organizations participated in and
          supported the making of this work, this collection of expertise and vision. Here are some, but
          not all, of them:
        </p>
      </div>

      <!-- Organizations List -->
      <div class="mt-12 pt-8 border-t border-border/50">
        <div class="text-center space-y-3">
          <p class="text-body text-foreground">Access Ecologies</p>
          <p class="text-body text-foreground">Community Resilience Organizations (CROs)</p>
          <p class="text-body text-foreground">Community Resilience for the Waterbury Area (CReW)</p>
          <p class="text-body text-foreground">Cooperation Vermont</p>
          <p class="text-body text-foreground">Lamoille Area Recovery Network (LeARN)</p>
          <p class="text-body text-foreground">Land Access and Opportunity Board (LAOB)</p>
          <p class="text-body text-foreground">Kingdom United Resilience and Recovery Effort (KURRVE)</p>
          <p class="text-body text-foreground">Northeast Kingdom Organizing (NEKO)</p>
          <p class="text-body text-foreground">Rose Core Collective</p>
          <p class="text-body text-foreground">Rural Vermont</p>
        </div>
      </div>
    </div>
  </section>

  <!-- Stewardship Section -->
  <section class="py-12">
    <div class="container mx-auto px-4 max-w-3xl">
      <h2 class="text-title font-semibold mb-4 text-foreground">
        A Living Toolkit
      </h2>
      <div class="space-y-4">
        <p class="text-body text-muted-foreground">
          This toolkit continues to be shaped by the communities using it. CROs stewards the platform, but the content belongs to everyone. It is open source, freely available, and made to be adapted to different communities and evolving needs.
        </p>
        <p class="text-body text-muted-foreground">
          As more people use this toolkit, we learn what works, what doesn’t, and what’s missing. Future versions will be shaped by those lessons. This is how mutual aid works — we build together, learn together, and improve what we share.
        </p>
      </div>
    </div>
  </section>

  <!-- Contribution Section -->
  <section class="py-16 bg-muted">
    <div class="container mx-auto px-4 max-w-3xl">
      <h2 class="text-headline font-semibold mb-6 text-foreground">
        Join This Work
      </h2>
      <div class="space-y-6">
        <p class="text-body-large text-muted-foreground">
          The toolkit grows through use and feedback. Here’s how you can be part of its evolution:
        </p>

        <div class="space-y-4">
          <div>
            <h3 class="text-subtitle font-semibold mb-2 text-foreground">
              Share What You Learn
            </h3>
            <p class="text-body text-muted-foreground">
              Tell us what worked, what didn’t, and what you discovered along the way.
            </p>
          </div>

          <div>
            <h3 class="text-subtitle font-semibold mb-2 text-foreground">
              Suggest Improvements
            </h3>
            <p class="text-body text-muted-foreground">
              If you see a gap or something unclear, let us know what would make it more useful.
            </p>
          </div>

          <div>
            <h3 class="text-subtitle font-semibold mb-2 text-foreground">
              Request Support
            </h3>
            <p class="text-body text-muted-foreground">
              CROs offers free consultations, technical support, training, and fiscal sponsorship for local resilience efforts. <a href="https://gocros.org/" class="text-primary hover:underline">Learn more at gocros.org</a> or get in touch below.
            </p>
          </div>

          <div>
            <h3 class="text-subtitle font-semibold mb-2 text-foreground">
              Collaborate
            </h3>
            <p class="text-body text-muted-foreground">
              If you have relevant experience or want to contribute new material, we welcome collaborators rooted in lived community resilience.
            </p>
          </div>
        </div>

        <div class="pt-6">
          <ActionButton href="#contact" variant="primary" size="lg">
            Start a Conversation
          </ActionButton>
        </div>
      </div>
    </div>
  </section>

  <!-- FAQ -->
  <section id="faq" class="py-16 bg-card">
    <div class="container mx-auto px-4 max-w-4xl">
      <h2 class="text-headline font-semibold mb-8 text-center text-foreground">
        Common Questions
      </h2>
      <div class="space-y-4">
        <FAQItem
          question="What is a Resilience Hub?"
          answer="A resilience hub can look many ways, but at its core, it is a centralized source of information, support, and supplies that supports community resilience. Read more about Resilience Hubs on the <a href='/introduction' class='text-primary hover:underline'>Introduction</a> page."
        />

        <FAQItem
          question="Who is this toolkit for?"
          answer="This toolkit is for community organizers, neighborhood groups, mutual aid networks, faith-based organizations, and anyone working to strengthen community resilience. No special training or technical skills are required."
        />

        <FAQItem
          question="Is this toolkit free to use?"
          answer="Yes, this toolkit is completely free and open-source. You can use it, modify it, and share it with others."
        />

        <FAQItem
          question="Do I need internet to use this toolkit?"
          answer="Not after your first visit. When you visit this toolkit for the first time with internet, your device automatically saves all the pages (like downloading an app). After that, you can use it anytime—even with WiFi off or in airplane mode.<br/><br/>To test it: turn off your WiFi and visit the site again. If it loads normally, it's working! You'll see a gray banner at the top saying 'You're working offline.'<br/><br/>Your checkmarks and notes save automatically and stay on your device. Learn more on our <a href='/downloads' class='text-primary hover:underline'>Downloads page</a>."
        />

        <FAQItem
          question="Is my information private and secure?"
          answer="Yes. All information you enter stays on your device in your web browser's storage. Nothing is sent to servers or stored in the cloud. The toolkit works fully offline once loaded, and your data never leaves your device."
        />

        <FAQItem
          question="Can I use this on my phone or tablet?"
          answer="Yes. The toolkit is designed to work on any device - phones, tablets, and computers. All features, including filling out forms, printing, and exporting data, work on mobile devices."
        />

        <FAQItem
          question="How do I save my work and transfer it to another device?"
          answer="On any module page, click the 'Export local data' button to download your information as a file. You can then email it to yourself, save it to a USB drive, or store it in cloud storage to transfer to another device. On the new device, use the 'Import data' button to load your information (Coming Soon)."
        />
      </div>
    </div>
  </section>

  <!-- License -->
  <section class="py-12 border-t border-border">
    <div class="container mx-auto px-4 max-w-4xl">
      <div class="bg-card border border-border rounded-lg p-8">
        <h2 class="text-title font-semibold mb-4 text-foreground">
          Free & Open Source
        </h2>
        <p class="text-body text-muted-foreground mb-4">
          This toolkit is released under open licenses to ensure it remains freely
          available to communities everywhere:
        </p>
        <ul class="space-y-2 text-body text-muted-foreground">
          <li class="flex items-start gap-3">
            <span class="text-primary mt-1">✓</span>
            <span><strong class="text-foreground">Code:</strong> Licensed under the <a href="/LICENSE" class="text-primary hover:underline">MIT License</a></span>
          </li>
          <li class="flex items-start gap-3">
            <span class="text-primary mt-1">✓</span>
            <span><strong class="text-foreground">Content:</strong> Released under Creative Commons licensing</span>
          </li>
          <li class="flex items-start gap-3">
            <span class="text-primary mt-1">✓</span>
            <span><strong class="text-foreground">Free to use, modify, and share</strong> with attribution</span>
          </li>
        </ul>
      </div>
    </div>
  </section>

  <!-- Contact -->
  <section id="contact" class="py-20 bg-muted">
    <div class="container mx-auto px-4 max-w-3xl">
      <div class="text-center mb-12">
        <h2 class="text-headline font-semibold mb-4 text-foreground">
          Start a Conversation
        </h2>
        <p class="text-body-large text-muted-foreground max-w-2xl mx-auto">
          Whether you’re looking to compare notes, ask questions, or explore next steps for your community, we’re here to figure it out together.
        </p>
      </div>

      <div class="bg-card border border-border rounded-lg p-8 shadow-card">
        <form id="contact-form" class="space-y-6">
          <div id="form-fields">
            <div class="mb-4">
              <label for="contact-email" class="block text-body font-medium text-foreground mb-2">
                Email Address
              </label>
              <input
                type="email"
                id="contact-email"
                name="email"
                placeholder="your@email.com"
                class="w-full px-4 py-3 border border-border rounded-lg bg-background text-foreground focus:ring-2 focus:ring-primary focus:border-primary transition-colors"
                required
                aria-required="true"
              />
            </div>
            <div class="mb-4">
              <label for="contact-message" class="block text-body font-medium text-foreground mb-2">
                How Can We Help?
              </label>
              <textarea
                id="contact-message"
                name="message"
                rows="5"
                placeholder="Tell us about your community and what you're hoping to accomplish..."
                class="w-full px-4 py-3 border border-border rounded-lg bg-background text-foreground focus:ring-2 focus:ring-primary focus:border-primary transition-colors resize-y"
                required
                aria-required="true"
              ></textarea>
            </div>
            <button
              type="submit"
              class="w-full inline-flex items-center justify-center font-medium transition-all duration-default ease-default focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 active:translate-y-px rounded-lg bg-primary text-primary-foreground shadow-sm hover:shadow-raised hover:bg-primary/90 px-6 py-3 text-body"
            >
              Send Message
            </button>
          </div>
          <div id="success-message" class="hidden text-center py-8">
            <div class="inline-flex items-center justify-center w-12 h-12 mb-4 relative">
              <svg class="w-12 h-12 absolute" viewBox="0 0 48 48">
                <circle
                  cx="24"
                  cy="24"
                  r="20"
                  fill="none"
                  stroke="currentColor"
                  stroke-width="3"
                  class="text-primary/10"
                />
              </svg>
              <svg
                id="progress-ring"
                class="w-12 h-12 absolute -rotate-90"
                viewBox="0 0 48 48"
              >
                <circle
                  cx="24"
                  cy="24"
                  r="20"
                  fill="none"
                  stroke="currentColor"
                  stroke-width="3"
                  stroke-linecap="round"
                  class="text-primary"
                  stroke-dasharray="125.6"
                  stroke-dashoffset="125.6"
                />
              </svg>
            </div>
            <p class="text-body font-medium text-foreground">
              Opening your email client...
            </p>
          </div>
        </form>

        <!-- Direct email fallback -->
        <div class="mt-6 pt-6 border-t border-border text-center">
          <p class="text-body-small text-muted-foreground mb-3">
            Prefer to email directly?
          </p>
          <a
            href="mailto:resiliencetoolkit@gocros.org"
            class="text-body font-medium text-primary hover:underline"
          >
            resiliencetoolkit@gocros.org
          </a>
        </div>
      </div>
    </div>
  </section>
</BaseLayout>

<style>
  @keyframes progressFill {
    from {
      stroke-dashoffset: 125.6;
    }
    to {
      stroke-dashoffset: 0;
    }
  }

  #progress-ring circle {
    animation: none;
  }

  #progress-ring.animating circle {
    animation: progressFill 5s linear forwards;
  }
</style>

<script>
  document.addEventListener('DOMContentLoaded', () => {
    const form = document.getElementById('contact-form') as HTMLFormElement;
    const formFields = document.getElementById('form-fields');
    const successMessage = document.getElementById('success-message');
    const progressRing = document.getElementById('progress-ring');

    if (form) {
      form.addEventListener('submit', (e: Event) => {
        e.preventDefault();

        const emailInput = document.getElementById('contact-email') as HTMLInputElement;
        const messageInput = document.getElementById('contact-message') as HTMLTextAreaElement;

        const userEmail = emailInput?.value.trim();
        const message = messageInput?.value.trim();

        if (!userEmail || !message) {
          return;
        }

        // Create mailto link with subject and body
        const subject = encodeURIComponent('Resilience Toolkit Contact');
        const body = encodeURIComponent(`Message: ${message}\n\nFrom: ${userEmail}`);
        const mailtoLink = `mailto:resiliencetoolkit@gocros.org?subject=${subject}&body=${body}`;

        // Show success message and hide form fields
        if (formFields && successMessage && progressRing) {
          formFields.classList.add('hidden');
          successMessage.classList.remove('hidden');
          progressRing.classList.add('animating');
        }

        // Open email client after 5 seconds
        setTimeout(() => {
          window.location.href = mailtoLink;
        }, 5000);

        // Reset form after 7 seconds
        setTimeout(() => {
          form.reset();
          if (formFields && successMessage && progressRing) {
            formFields.classList.remove('hidden');
            successMessage.classList.add('hidden');
            progressRing.classList.remove('animating');
          }
        }, 7000);
      });
    }
  });
</script>
