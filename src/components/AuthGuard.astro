---
/**
 * AuthGuard Component
 *
 * DISABLED - Authentication removed, fully local app
 * This component now simply renders children without any auth checks
 *
 * Previously protected routes by checking authentication status.
 */

// No auth checks - fully local app
const authContext = {
  user: null,
  session: null,
  authRequired: false,
  isAuthenticated: false,
};
---

<!--
  DISABLED - No auth protection
  Render children without authentication checks
-->
<slot {...authContext} />

<!-- COMMENTED OUT - Supabase authentication removed

---
import { getSession } from '../lib/supabase';
import { isAuthRequired } from '../lib/featureFlags.server';
import { buildLoginUrl } from '../lib/validateRedirect';

// Server-side checks (runs before rendering)
const session = await getSession();
const authRequired = await isAuthRequired();

// If auth is required and user is not authenticated, redirect to login
if (authRequired && !session) {
  const currentPath = Astro.url.pathname;
  const loginUrl = buildLoginUrl(currentPath);

  console.log('[AuthGuard] Unauthorized access attempt:', {
    path: currentPath,
    authRequired,
    authenticated: !!session,
  });

  return Astro.redirect(loginUrl);
}

// Pass auth context to children
const authContext = {
  user: session?.user || null,
  session,
  authRequired,
  isAuthenticated: !!session,
};
---

-->
